<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" type="text/css" href="assets/css/base.css" />
    <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      var ifok = new Firebase('https://if-theyre-ok.firebaseio.com');
      var credits = ifok.child('credits').orderByChild('date');

      var list = document.getElementById('list');

      credits.on('child_added', function(snapshot) {
        addCredit(snapshot.val());
      });

      function addCredit(data) {
        var article = document.createElement('article');
        var name = document.createElement('section');
        name.innerHTML = data.name;
        article.appendChild(name);
        if (data.credit) {
          var credit = document.createElement('section');
          credit.innerHTML = data.credit;
          article.appendChild(credit);
        }
        list.appendChild(article);
      }

      /*
      Manipulate css transform properties for GPU accelerated scrolling
      =================================================================
      start:
      100% off screen (window.innerHeight);

      then -1px at a time every 25 milliseconds

      end:
      -1*list.offsetHeight
      */
      (function autoScroll() {
        var depth = window.innerHeight;
        var scrollInterval = window.setInterval(function() {
          depth = depth > -1*list.offsetHeight ? depth - 1 : window.innerHeight;
          list.style.transform = 'translateY(' + depth + 'px)';
        }, 25);
      })();
    });
    </script>
  </head>
  <body class="list">
    <main id="list" class="list">
    </main>
  </body>
</html>
